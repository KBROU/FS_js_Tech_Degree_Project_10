extends ../layout

block content
  h1 Loans
  p
    a.button(href='loans/new') Create New Loan
  p
    | Filters 
    a(href='/loans/') All
    |  | 
    a(href='/loans/overdue') Overdue
    |  | 
    a(href='/loans/checked') Checked Out
  table
    thead
      tr
        th Book
        th Patron 
        th Loaned on
        th Return by 
        th Returned on
        th Action
    tbody
      each loan in loans
        tr
          td
            a(href='book_detail.html')= loan.Book.title
          td
            a(href='patron_detail.html')= loan.Patron.first_name + ' ' + loan.Patron.last_name
          td= loan.loaned_on
          td= loan.return_by
          td= loan.returned_on
          td
            if(loan.returned_on == NULL)
              a.button(href='/books/' + loan.id + '/return/') Return Book
